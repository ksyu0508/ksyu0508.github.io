<!DOCTYPE html>
<html lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="gL7v_rlH_MgG02OOs9glh9YTXQWTVfYIW0XuwyYIPQk">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>linux 서버 WOL 설정 | ksyu0508’s blog</title>
<meta name="generator" content="Jekyll v3.9.5">
<meta property="og:title" content="linux 서버 WOL 설정">
<meta name="author" content="ksyu0508">
<meta property="og:locale" content="ko">
<meta name="description" content="서론">
<meta property="og:description" content="서론">
<link rel="canonical" href="https://ksyu0508.github.io/linux/NAS-3/">
<meta property="og:url" content="https://ksyu0508.github.io/linux/NAS-3/">
<meta property="og:site_name" content="ksyu0508’s blog">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2024-01-04T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="linux 서버 WOL 설정">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ksyu0508"},"dateModified":"2024-01-04T00:00:00+00:00","datePublished":"2024-01-04T00:00:00+00:00","description":"서론","headline":"linux 서버 WOL 설정","mainEntityOfPage":{"@type":"WebPage","@id":"https://ksyu0508.github.io/linux/NAS-3/"},"url":"https://ksyu0508.github.io/linux/NAS-3/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" type="text/css" href="/assets/css/linkpreview.css" media="screen">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/assets/icon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icon/favicon-16x16.png">
  <link rel="manifest" href="/assets/icon/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <!-- <link rel="shortcut icon" href=""> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="https://ksyu0508.github.io/feed.xml" title="ksyu0508's blog">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #148114;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>
<body>





































































































































<header class="site-header site-header-transparent" role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="ksyu0508's blog" src="" onerror="this.style.display='none'">
  ksyu0508's blog
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/">HOME</a><a class="page-link" href="/archives/">ARCHIVES</a><a class="page-link" href="/categories/">CATEGORIES</a><a class="page-link" href="/tags/">TAGS</a><a class="page-link" href="/about/">ABOUT</a><span class="page-link" style="display: inline-block;"><!-- <style>
  .parent {
    text-align: center;
  }
</style> -->

<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
</span>




<!---->
            <span class="page-link">

<div id="google_translate_element" style="display: none;">
</div>

<span class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
  </ul>
</span>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: '',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</span>
            <!---->

          </div>
        </nav>
</div>
  </div>
</header>

<script>
  (function() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;documentElement.setAttribute("data-header-transparent", "");var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  })();
</script>


























































































































































<section class="page-banner">
    <div class="page-banner-img">
<div style="background-image: url(/assets/images/banners/home2.jpg)"></div>
        <img class="img-placeholder" src="/assets/images/banners/home2.jpg">
</div>
    <div class="wrapper">
      <div class="page-banner-inner">
<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">linux 서버 WOL 설정</h1>
  <h2 class="post-subtitle">NAS</h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2024-01-04T00:00:00+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Jan 04, 2024
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 20 mins</span>
  </p>
<div class="post-tags">
<a class="post-tag" href="/tags.html#linux">#linux</a><a class="post-tag" href="/tags.html#NAS">#NAS</a><a class="post-tag" href="/tags.html#WOL">#WOL</a><a class="post-tag" href="/tags.html#Wake-on-Lan">#Wake-on-Lan</a><a class="post-tag" href="/tags.html#cron">#cron</a>
</div></header>
</div>
    </div>
  </section><script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <h2 id="서론">서론</h2>

<p>구성한 NAS 서버가 아이들시 30W, 사용 시 60W 정도의 전력을 소모하는데 대부분 아이들 상태일 것이지만 30W가 계속 켜져있으면 무시할 만한 수준의 전력 소모도 아니고, 또 계속 집에 컴퓨터가 켜져 있는 것도 신경쓰이기 때문에 필요할 때마다 외부에서도 전원을 킬 수 있도록 NAS 서버에 <code class="language-plaintext highlighter-rouge">WOL</code>을 구성하려 한다. <code class="language-plaintext highlighter-rouge">WOL</code>은 <code class="language-plaintext highlighter-rouge">"Wake-on-LAN"</code>의 약자로, 컴퓨터를 네트워크 장치를 활용하여 원격으로 켜는 기술이다. <code class="language-plaintext highlighter-rouge">WOL</code>을 위해서는</p>

<ol>
  <li>네트워크 어댑터 <code class="language-plaintext highlighter-rouge">WOL</code> 기능 지원 여부</li>
  <li>BIOS 설정(<code class="language-plaintext highlighter-rouge">ErP</code>/<code class="language-plaintext highlighter-rouge">Power On By PCI-E/Wake on Lan</code>)</li>
  <li>공유기 설정</li>
  <li>OS(linux/windows) WOL 설정</li>
</ol>

<p>을 확인하여 주면 된다.</p>

<h3 id="1-네트워크-어댑터-wol-기능-지원-여부">1. 네트워크 어댑터 <code class="language-plaintext highlighter-rouge">WOL</code> 기능 지원 여부</h3>

<p>최근 나오는 랜카드들은 거의 기본적으로 <code class="language-plaintext highlighter-rouge">WOL</code>기능을 활용하고 있기에 크게 신경쓰지 않아도 된다.</p>

<h3 id="2-bios-설정">2. BIOS 설정</h3>

<p>메인보드 제조사마다 다르지만 Asus기준으로 <code class="language-plaintext highlighter-rouge">ErP</code>와 <code class="language-plaintext highlighter-rouge">Power On By PCI-E</code> 옵션 두가지를 체크해주면 된다. <code class="language-plaintext highlighter-rouge">ErP</code>의 옵션이 활성화 되있을 경우, 대기 전력 소모를 줄이기 위해서 컴퓨터가 일부 하드웨어들을 비활성화시킬 수 있는데, 네트워크 어댑터는 매직패킷 수신을 위해서 항상 대기하고 있어야 하기 때문에, <code class="language-plaintext highlighter-rouge">ErP</code> 옵션이 비활성화 되어야, 항상 컴퓨터가 매직패킷 수신을 위해서 대기할 수 있는 상태를 유지할 수 있다. 다만 <code class="language-plaintext highlighter-rouge">ErP</code>옵션이 활성화 되었을 경우 다른 부품들, 특히 LED가 안 꺼질 수도 있는 상황이 발생할 수 있다.(상당히 거슬림) <code class="language-plaintext highlighter-rouge">Power On By PCI-E/Wake on Lan</code>옵션의 경우, WOL을 사용하기 위해서 활성화하여야 한다. Asus 메인보드 설정 과정의 경우 아래 링크 참고</p>

<div class="jekyll-linkpreview-wrapper">
  <div class="jekyll-linkpreview-wrapper-inner">
    <div class="jekyll-linkpreview-content">
      <div class="jekyll-linkpreview-image">
        <a href="https://www.asus.com/kr/support/FAQ/1048459/" target="_blank">
          <img src="">
        </a>
      </div>
    </div>
    <div class="jekyll-linkpreview-footer">
      <div class="jekyll-linkpreview-body">
        <h1 class="jekyll-linkpreview-title">
          <a href="https://www.asus.com/kr/support/FAQ/1048459/" target="_blank">[Commercial DT] WOL(Wake on LAN) 기능을 활성화하는 방법 | 공식지원 | ASUS 한국</a>
        </h1>
        <div class="jekyll-linkpreview-description">제품 선택
              
                
                    
                      
                        
                      
                    
                    
                      
                    
                
              
            </div>
      </div>
      <a href="www.asus.com" target="_blank">www.asus.com</a>
    </div>
  </div>
</div>

<h3 id="3-공유기-설정">3. 공유기 설정</h3>

<p><img src="https://onedrive.live.com/embed?resid=C5BC7ED83BDA0D3B%2111834&authkey=%21AGQRkwxENQWgWQA&width=923&height=751" alt=""></p>

<p>공유기도 마찬가지로 제조사마다 설정이 다르다. 설정해주어야 할 것은 크게 두가지인데 첫번째로 WOL을 사용할 PC의 IP를 고정으로 할당하여 주어야 하며, 외부망에서 WOL을 활용하고자 할 경우 포트포워딩을 해주어야 한다.</p>

<p><code class="language-plaintext highlighter-rouge">DHCP(Dynamic Host Configuration Protocol)</code>서버(공유기)는 네트워크에 연결된 장치들에게 자동으로 IP주소를 할당(임대)하여 주는데 따로 설정하지 않으면, 임의로 IP주소를 할당하고 연결이 끊어질 경우 주소를 회수하여 간다. 공유기 설정에서 MAC주소를 통해서 내부 IP주소를 고정적으로 할당할 수 있으며, 필자가 사용하는 LG U+ 공유기에서는 DHCP 고정할당이라는 메뉴가 존재하여 MAC 주소만 기입하여 주면 원하는 IP를 고정적으로 할당할 수 있다.</p>

<p>내부망에서만 활용할 경우에는 크게 상관이 없지만, WOL을 구성하려는 대부분의 사람들은 집 밖의 환경에서 컴퓨터를 켜기 위함이 대부분일 것이다. WOL은 기본적으로 9번 포트에 UDP를 활용하여 매직 패킷을 전송한다. 따라서 포트포워딩 시에는 외부 포트를 7777등으로 임의로 설정 후, WOL을 사용하고자 하는 컴퓨터의 9번포트를 UDP로 연결해주면 될 것이다.</p>

<p>가정에서 사용하는 공유기 IP의 경우 대부분 유동 IP 방식이기 때문에, 외부에서 편하게 사용하기 위해서는 <code class="language-plaintext highlighter-rouge">DDNS</code>가 필요할 수도 있다. <code class="language-plaintext highlighter-rouge">DDNS</code>는 <code class="language-plaintext highlighter-rouge">"Dynamic Domain Name System"</code>의 약자로, 유동 IP 도메인 이름과 동적으로 연결하는 시스템으로, 공유기에서 지원하는 <code class="language-plaintext highlighter-rouge">DDNS</code>를 활용하는 것도 방법이다. LG U+ 공유기에서는 세가지 <code class="language-plaintext highlighter-rouge">DDNS</code> 사이트를 지원하며, 그 중에 무료인 <code class="language-plaintext highlighter-rouge">freedns</code>를 활용하여 <code class="language-plaintext highlighter-rouge">DDNS</code>를 구성하였다.</p>

<div class="jekyll-linkpreview-wrapper">
  <div class="jekyll-linkpreview-wrapper-inner">
    <div class="jekyll-linkpreview-content">
      <div class="jekyll-linkpreview-image">
        <a href="https://freedns.afraid.org/" target="_blank">
          <img src="">
        </a>
      </div>
    </div>
    <div class="jekyll-linkpreview-footer">
      <div class="jekyll-linkpreview-body">
        <h1 class="jekyll-linkpreview-title">
          <a href="https://freedns.afraid.org/" target="_blank">FreeDNS - Free DNS - Dynamic DNS - Static DNS subdomain and domain hosting</a>
        </h1>
        <div class="jekyll-linkpreview-description">Free DNS hosting, lets you fully manage your own domain.  Dynamic DNS and Static DNS services available.  You may also create hosts off other domains that we host upon the domain owners consent, we have several domains to choose from!</div>
      </div>
      <a href="freedns.afraid.org" target="_blank">freedns.afraid.org</a>
    </div>
  </div>
</div>

<h4 id="매직패킷">매직패킷</h4>

<p>매직 패킷은 특수한 패턴으로 구성된 패킷으로  <code class="language-plaintext highlighter-rouge">FF FF FF FF FF FF</code>뒤에 깨우고자 하는 대상 컴퓨터의 맥주소가 16번 반복되는 형태이다. 만약 <code class="language-plaintext highlighter-rouge">01:23:45:67:89:AB</code>가 맥주소라면,</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FF FF FF FF FF FF 01 23 45 67 89 AB 01 23 45 67 89 AB ...
</code></pre></div></div>
<p>처럼 매직 패킷이 구성되게 된다. 사실 매직패킷구조를 몰랐을 때에는, 괜히 포트를 외부망에 개방하는 것이 걸렸는데, WOL포트를 통해서 할 수 있는 것은 매직 패킷보내는 것 뿐인데 외부인이 매직 패킷을 보낼 이유도 없고, 맥주소를 모르면서 부르트포스를 시도할 한가할 사람도 없을 것이며, 만에 하나 켜저도 전기 소비 조금 더 되고 아무 피해 없을 것이다…</p>

<h3 id="4-linux에서-wol-설정">4. linux에서 WOL 설정</h3>

<p>linux환경에서 WOL을 설정하는 방법은 window보다 간단하다.</p>

<ol>
  <li>먼저 네트워크 어댑터의 <code class="language-plaintext highlighter-rouge">interface 명</code>을 확인한다.
    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>root@ksyu0508:~# <span class="nb">sudo </span>lshw <span class="nt">-C</span> network
  <span class="k">*</span><span class="nt">-network</span>                 
    description: Ethernet interface
    product: RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller
    vendor: Realtek Semiconductor Co., Ltd.
    physical <span class="nb">id</span>: 0
    bus info: pci@0000:03:00.0
    logical name: <span class="o">{</span>interface 명<span class="o">}</span>
    version: 09
    serial: <span class="o">{</span>MAC 주소<span class="o">}</span>
    size: 1Gbit/s
    capacity: 1Gbit/s
    width: 64 bits
    clock: 33MHz
    capabilities: pm msi pciexpress msix vpd bus_master cap_list ethernet physical tp mii 10bt 10bt-fd 100bt 100bt-fd 1000bt-fd autonegotiation
    configuration: <span class="nv">autonegotiation</span><span class="o">=</span>on <span class="nv">broadcast</span><span class="o">=</span><span class="nb">yes </span><span class="nv">driver</span><span class="o">=</span>r8169 <span class="nv">driverversion</span><span class="o">=</span>6.5.11-4-pve <span class="nv">duplex</span><span class="o">=</span>full <span class="nv">firmware</span><span class="o">=</span>rtl8168f-1_0.0.5 06/18/12 <span class="nv">latency</span><span class="o">=</span>0 <span class="nb">link</span><span class="o">=</span><span class="nb">yes </span><span class="nv">multicast</span><span class="o">=</span><span class="nb">yes </span><span class="nv">port</span><span class="o">=</span>twisted pair <span class="nv">speed</span><span class="o">=</span>1Gbit/s
    resources: irq:16 ioport:e000<span class="o">(</span><span class="nv">size</span><span class="o">=</span>256<span class="o">)</span> memory:f0004000-f0004fff memory:f0000000-f0003fff
</code></pre></div>    </div>
  </li>
</ol>

<p>다음 명령으를 통해서 현재 WOL이 설정되어 있는지 확인할 수 있다. 상태가 <code class="language-plaintext highlighter-rouge">d</code>로 표시될 경우 WOL이 비활성화 된 상태이며, <code class="language-plaintext highlighter-rouge">g</code>로 표시되어야 활성화 된 것이다.</p>

<ul>
  <li>WOL 비활성화 상태:
    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>root@ksyu0508:~# ethtool <span class="o">{</span>interface 명<span class="o">}</span> | <span class="nb">grep </span>Wake-on
      Supports Wake-on: pumbg
      Wake-on: d
</code></pre></div>    </div>
  </li>
  <li>WOL 활성화 상태:
    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>root@ksyu0508:~# ethtool <span class="o">{</span>interface 명<span class="o">}</span> | <span class="nb">grep </span>Wake-on
      Supports Wake-on: pumbg
      Wake-on: g
</code></pre></div>    </div>
  </li>
</ul>

<p>아래 명령어를 통해서 WOL을 활성화 시킬 수 있다. 다만 일회성이고 재부팅 되면 다시 <code class="language-plaintext highlighter-rouge">d</code>로 돌아오기 때문에 다른 방법을 통해서 명령어가 컴퓨터 부팅시마다 계속 실행되게 해주어야 한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ksyu0508:~# ethtool <span class="nt">-s</span> <span class="o">{</span>interface 명<span class="o">}</span> wol g
</code></pre></div></div>

<ol>
  <li>linux의 스케줄러인 cron을 활용하여 서버가 부팅될 때마다 위 명령어를 실행시켜 줄 수 있다. cron 설정 파일을 연 다음,</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@ksyu0508:~# crontab <span class="nt">-e</span>
</code></pre></div></div>

<p>아래 내용을 추가하여 주면 된다. <code class="language-plaintext highlighter-rouge">ethtool</code> 경로의 경우 자신의 환경에 맞게 넣어주면 된다. <code class="language-plaintext highlighter-rouge">cron</code>에서 <code class="language-plaintext highlighter-rouge">@reboot</code>로 실행 시 <code class="language-plaintext highlighter-rouge">$PATH</code>가 불러진 상태가 아니기 때문에 절대 경로로 넣어주어야 한다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@reboot /sbin/ethtool -s {interface 명} wol g
</code></pre></div></div>

<p>아래 사이트에서 방법을 참고하였으며, cron을 활용한 방법 이외에도 다양한 방법들이 소개되어 있으니 참고하면 좋을 것 같다.</p>
<div class="jekyll-linkpreview-wrapper">
  <div class="jekyll-linkpreview-wrapper-inner">
    <div class="jekyll-linkpreview-content">
      <div class="jekyll-linkpreview-image">
        <a href="https://wiki.archlinux.org/title/Wake-on-LAN" target="_blank">
          <img src="">
        </a>
      </div>
    </div>
    <div class="jekyll-linkpreview-footer">
      <div class="jekyll-linkpreview-body">
        <h1 class="jekyll-linkpreview-title">
          <a href="https://wiki.archlinux.org/title/Wake-on-LAN" target="_blank">Wake-on-LAN - ArchWiki</a>
        </h1>
        <div class="jekyll-linkpreview-description">To query this status or to change the settings, install ethtool, determine the name of the network interface, and query it using the command:
</div>
      </div>
      <a href="wiki.archlinux.org" target="_blank">wiki.archlinux.org</a>
    </div>
  </div>
</div>

<h2 id="테스트">테스트</h2>
<p>설정이 완료되었다면, 공유기에서 제공하는 WOL 기능이나, linux의 <code class="language-plaintext highlighter-rouge">wakeonlan</code>패키지 활용하거나, Wake On Lan 어플을 통해서 WOL 매직 패킷을 전송할 수 있다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># sudo apt-get install wakeonlan</span>
<span class="c"># wakeonlan &lt;MAC-Address&gt;</span>
</code></pre></div></div>

<div class="jekyll-linkpreview-wrapper">
  <div class="jekyll-linkpreview-wrapper-inner">
    <div class="jekyll-linkpreview-content">
      <div class="jekyll-linkpreview-image">
        <a href="https://play.google.com/store/apps/details?id=co.uk.mrwebb.wakeonlan&hl=ko" target="_blank">
          <img src="https://play-lh.googleusercontent.com/KfSXnrNMIUgbTq4t1X4zwipG8f252SF4OtJY8TIPsy1fLAX791z75ydRlZcBGDrjr6c">
        </a>
      </div>
    </div>
    <div class="jekyll-linkpreview-footer">
      <div class="jekyll-linkpreview-body">
        <h1 class="jekyll-linkpreview-title">
          <a href="https://play.google.com/store/apps/details?id=co.uk.mrwebb.wakeonlan&hl=ko" target="_blank">Wake On Lan - Google Play 앱</a>
        </h1>
        <div class="jekyll-linkpreview-description">빠르고 간단 해 WakeOnLAN / WOL!</div>
      </div>
      <a href="play.google.com" target="_blank">play.google.com</a>
    </div>
  </div>
</div>

<h2 id="후기">후기</h2>
<p><code class="language-plaintext highlighter-rouge">WOL</code> 기능을 활용할 수 없는 환경에서는 메인보드의 <code class="language-plaintext highlighter-rouge">Restore AC Power Loss</code> 옵션을 활용하여(메인보드 사마다 다를 수 있음) 스마트 플러그와 조합하면 간단하게 원경 부팅을 시도할 수 있다. 스마트 플러그를 이용한 원경 부팅 환경도 사용해 보았는데, 장점이라 한다면 <code class="language-plaintext highlighter-rouge">WOL</code>은 외부망에서 시도할 경우 포트개방, <code class="language-plaintext highlighter-rouge">WOL</code>관련 설정, 포트포워딩 등의 작업을 직접 수행해야하지만, 스마트플러그의 경우 자체적으로 제공해주는 앱에서 외부망 내부망 상관 없이 접근할 수 있기 때문에 상대적으로 간편하게 구성할 수 있으며 대기전력을 아예 0W로 만들어 버릴 수 있다. 이는 매직패킷을 수신하기 위해서 항상 랜카드에 최소한의 전력을 인가하여 대기시켜야만 하는 <code class="language-plaintext highlighter-rouge">WOL</code> 설정과는 대비되는 장점이라 할 수 있다. 단점도 소소하게 존재하는데, 전력을 아예 끊어버리기 때문에, 메인보드 수은 전지가 조금씩 소모되어 메인보드 설정이 날아갈 수도 있다는 약간의 리스크가 존재한다(방전되기 전에 컴퓨터 교체할 확률이 더 높음). 또, 전력이 끊켜도 PC 파워에는 일정 시간 전류가 남아있기 때문에, PC를 끄자마자 다시 켜기 위해서는 완전 방전을 위해서 조금 기다려주어야 한다. 이게 PC 상태를 바로 확인할 수 없는 외부 환경에서는 PC 종료하는 도중에 깜빡한게 떠올릴 경우 은근히 거슬리는 상황이 발생한다. 결과적으로는 본인의 상황에 맞추어서 원격 부팅 환경을 구현하면 좋을 것이다.</p>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/github%20blog/favicon/" title="Github blog 아이콘 변경">Github blog 아이콘 변경</a><a class="next" href="/linux/WSL-NAS/" title="WSL 네트워크 드라이브 마운트 방법">WSL 네트워크 드라이브 마운트 방법</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li><a class="post-link" href="/problem%20solving/SQL-2/" title="WSL 네트워크 드라이브 마운트 방법">프로그래머스 SQL 문제 풀이 (2)</a></li>
<li><a class="post-link" href="/problem%20solving/boj-1055/" title="WSL 네트워크 드라이브 마운트 방법">백준 1055번 문제 풀이</a></li>
<li><a class="post-link" href="/problem%20solving/SQL-1/" title="WSL 네트워크 드라이브 마운트 방법">프로그래머스 SQL 문제 풀이 (1)</a></li>
<li><a class="post-link" href="/prometheus/promql/" title="WSL 네트워크 드라이브 마운트 방법">PromQL 사용법</a></li>
</ul>
    </div>
<div class="post-comments">
      <script src="https://utteranc.es/client.js" repo="ksyu0508/ksyu0508.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async>
      </script>
    </div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
      <div>Copyright © 2022 @ksyu0508</div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="http://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
